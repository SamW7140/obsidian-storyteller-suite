type Lang = 'en' | 'zh';

const en = {
  dashboardTitle: 'Storyteller suite',
  openDashboard: 'Open dashboard',
  createNew: 'Create new',
  uploadImage: 'Upload Image',
  image: 'Image',
  // Notices
  storyCreated: (name: string) => `Story "${name}" created and activated.`,
  created: (what: string, name: string) => `${what} "${name}" created.`,
  updated: (what: string, name: string) => `${what} "${name}" updated.`,
  movedToTrash: (what: string, name: string) => `${what} "${name}" moved to trash.`,
  imageUploaded: (fileName: string) => `Image uploaded: ${fileName}`,
  errorUploadingImage: 'Error uploading image. Please try again.',
  noteCreatedWithSections: 'Note created with standard sections for easy editing.',
  // Errors
  workspaceLeafCreateError: 'Error opening dashboard: Could not create workspace leaf.',
  workspaceLeafRevealError: 'Error revealing dashboard: Workspace leaf not found.',
  errorCannotDeleteWithoutFilePath: (what: string) => `Error: Cannot delete ${what} without file path.`,
  errorCannotOpenNoteWithoutFilePath: (what: string) => `Error: Cannot open ${what} note without file path.`,
  // Remote images
  remoteImagesBlocked: 'Remote images are blocked by settings. Import the image to your gallery to use it safely.',
  importImage: 'Import image',
  // Language settings
  language: 'Language',
  selectLanguage: 'Select language',
  english: 'English',
  chinese: 'Chinese (中文)',
  languageChanged: 'Language changed. Reload plugin for full effect.',
  // Common UI elements
  name: 'Name',
  description: 'Description',
  backstory: 'Backstory',
  history: 'History',
  location: 'Location',
  character: 'Character',
  event: 'Event',
  item: 'Item',
  reference: 'Reference',
  chapter: 'Chapter',
  scene: 'Scene',
  group: 'Group',
  characters: 'Characters',
  locations: 'Locations',
  events: 'Events',
  items: 'Items',
  references: 'References',
  chapters: 'Chapters',
  scenes: 'Scenes',
  groups: 'Groups',
  gallery: 'Gallery',
  timeline: 'Timeline',
  // Actions
  create: 'Create',
  edit: 'Edit',
  delete: 'Delete',
  save: 'Save',
  cancel: 'Cancel',
  view: 'View',
  upload: 'Upload',
  import: 'Import',
  export: 'Export',
  // Modal titles
  createNewCharacter: 'Create new character',
  editCharacter: 'Edit character',
  createNewLocation: 'Create new location',
  editLocation: 'Edit location',
  createNewEvent: 'Create new event',
  editEvent: 'Edit event',
  createNewItem: 'Create new item',
  editItem: 'Edit item',
  createNewReference: 'Create new reference',
  editReference: 'Edit reference',
  createNewChapter: 'Create new chapter',
  editChapter: 'Edit chapter',
  createNewScene: 'Create new scene',
  editScene: 'Edit scene',
  createNewGroup: 'Create new group',
  editGroup: 'Edit group',
  // Additional entity labels
  tags: 'Tags',
  summary: 'Summary',
  content: 'Content',
  number: 'Number',
  orderingNumber: 'Ordering number (optional)',
  category: 'Category',
  // Button labels
  createCharacter: 'Create character',
  createLocation: 'Create location',
  createEvent: 'Create event',
  createItem: 'Create item',
  createReference: 'Create reference',
  createChapter: 'Create chapter',
  createScene: 'Create scene',
  createGroup: 'Create group',
  saveChanges: 'Save changes',
  deleteCharacter: 'Delete character',
  deleteLocation: 'Delete location',
  deleteEvent: 'Delete event',
  deleteItem: 'Delete item',
  deleteReference: 'Delete reference',
  deleteChapter: 'Delete chapter',
  deleteScene: 'Delete scene',
  deleteGroup: 'Delete group',
  add: 'Add',
  clear: 'Clear',
  ok: 'OK',
  confirm: 'Confirm',
  selectBtn: 'Select',
  previewBtn: 'Preview',
  editBtn: 'Edit',
  openNoteBtn: 'Open Note',
  // Dropdown options
  flattenCustomFields: 'Flatten to native keys (recommended)',
  nestedCustomFields: 'Nested under customFields (YAML map)',
  noGrouping: 'No grouping',
  byLocation: 'By location',
  byGroup: 'By group',
  noneOption: 'None',
  fitOption: 'Fit',
  decadeOption: 'Decade',
  centuryOption: 'Century',
  // Warning messages
  customFoldersPlaceholderWarning: 'Custom folders use {story*} placeholders. Select or create an active story, then click "Rescan custom folders".',
  openNote: 'Open note',
  createGroupBtn: 'Create group',
  createChapterBtn: 'Create chapter',
  createSceneBtn: 'Create scene',
  createReferenceBtn: 'Create reference',
  viewCharacters: 'View characters',
  viewLocations: 'View locations',
  viewEvents: 'View events',
  viewItems: 'View items',
  viewReferences: 'View references',
  viewChapters: 'View chapters',
  viewScenes: 'View scenes',
  viewGroups: 'View groups',
  viewTimeline: 'View timeline',
  viewGallery: 'View gallery',
  // Additional messages
  selectOrCreateStoryFirst: 'Select or create a story first.',
  selectGroupPlaceholder: '-- Select group --',
  affiliation: 'Affiliation',
  groupsHelpCharacter: 'Assign this character to one or more groups.',
  members: 'Members',
  noCustomFields: 'No custom fields defined.',
  selectFromGallery: 'Select from gallery',
  clearImage: 'Clear image',
  addImage: 'Add image',
  imageGallery: 'Image gallery',
  filter: 'Filter',
  search: 'Search',
  storyName: 'Story Name',
  createNewStory: 'Create new story',
  plotItems: 'Plot items',
  title: 'Title',
  caption: 'Caption',
  fit: 'Fit',
  decade: 'Decade',
  century: 'Century',
  today: 'Today',
  copyRange: 'Copy range',
  stackItems: 'Stack items',
  goToChapter: 'Go to chapter',
  unassigned: 'Unassigned',
  // Additional placeholders/helpers
  chapterTitlePh: 'Chapter title',
  sceneTitlePh: 'Scene title',
  numberEg: 'e.g., 1',
  tagsPh: 'tag1, tag2',
  briefChapterSummaryPh: 'Brief summary for this chapter...',
  writeYourScenePh: 'Write your scene...',
  beatSheet: 'Beat sheet (one per line)',
  beatSheetExample: '- Meet the mentor\\n- The refusal',
  // Settings labels
  stories: 'Stories',
  active: 'Active',
  setActive: 'Set Active',
  editStory: 'Edit Story',
  // duplicate removed
  // duplicate removed (createNewStory already defined above)
  storyDiscovery: 'Story discovery',
  refreshDiscovery: 'Refresh discovery',
  galleryUploadFolder: 'Gallery upload folder',
  timelineAndParsing: 'Timeline and parsing',
  customFieldsSerialization: 'Custom fields serialization',
  forwardDateBias: 'Forward-date bias for natural language parsing',
  customToday: 'Custom today (timeline reference)',
  defaultTimelineGrouping: 'Default timeline grouping',
  defaultZoomPreset: 'Default zoom preset',
  defaultStacking: 'Default stacking',
  defaultDensity: 'Default density',
  showLegendByDefault: 'Show legend by default',
  timelineDefaultHeight: 'Timeline default height',
  useCustomEntityFolders: 'Use custom entity folders',
  previewResolvedFolders: 'Preview resolved folders',
  storyRootFolderOptional: 'Story root folder (optional)',
  charactersFolder: 'Characters folder',
  locationsFolder: 'Locations folder',
  eventsFolder: 'Events folder',
  itemsFolder: 'Items folder',
  referencesFolder: 'References folder',
  scenesFolder: 'Scenes folder',
  chaptersFolder: 'Chapters folder',
  oneStoryMode: 'One Story Mode',
  oneStoryBaseFolder: 'One Story base folder',
  showTutorialSection: 'Show tutorial section',
  support: 'Support',
  supportDevelopment: 'Support development',
  about: 'About',
  pluginInformation: 'Plugin information',
  buyMeACoffee: 'Buy me a coffee',
  github: 'GitHub',
  preview: 'Preview',
  clearCustomToday: 'Clear custom today',
  // Placeholders
  enterCharacterName: 'Enter character name',
  characterDescriptionPh: 'A brief description of the character...',
  traitsPlaceholder: 'e.g., Brave, Curious, Stubborn',
  characterHistoryPh: "The character's history...",
  statusPlaceholderCharacter: 'e.g., Alive, Deceased, Missing',
  enterItemName: 'Enter item name',
  itemDescriptionPh: 'A visual description of the item...',
  itemHistoryPh: "The item's origin, past, and significance...",
  enterLocationName: 'Enter location name',
  locationDescriptionPh: 'A brief description of the location...',
  locationHistoryPh: "The location's history and past events...",
  statusPlaceholderLocation: 'e.g., Active, Ruins, Abandoned',
  enterEventName: 'Enter event name',
  eventDescriptionPh: 'A description of the event...',
  eventOutcomePh: 'The result or consequences of the event...',
  enterDateTime: 'Enter date/time',
  statusPlaceholderEvent: 'e.g., Upcoming, Completed, Ongoing, key plot point',
  // Event-specific
  dateTime: 'Date/time',
  outcome: 'Outcome',
  status: 'Status',
  charactersInvolved: 'Characters involved',
  associatedImages: 'Associated images',
  links: 'Links',
  relationships: 'Relationships & Location',
  currentOwner: 'Current Owner',
  currentLocation: 'Current Location',
  plotCritical: 'Plot Critical',
  traits: 'Traits',
  profileImage: 'Profile image',
  itemImage: 'Item Image',
  selectOwner: 'Select Owner',
  selectLocation: 'Select Location',
  changeLocation: 'Change location',
  clearLocation: 'Clear location (set to none)',
  parentLocation: 'Parent Location',
  selectParentLocation: 'Select Parent Location',
  clearParentLocation: 'Clear parent location',
  addCharacter: 'Add character',
  addCustomField: 'Add custom field',
  fieldName: 'Field name',
  fieldValue: 'Field value',
  customFieldValueTitle: 'Custom field value',
  newCustomFieldTitle: 'New custom field',
  valueForX: (x: string) => `Value for "${x}"`,
  fieldNameCannotBeEmpty: 'Field name cannot be empty',
  thatNameIsReserved: 'That name is reserved',
  fieldAlreadyExists: 'A field with that name already exists',
  characterNameRequired: 'Character name cannot be empty.',
  eventNameRequired: 'Event name cannot be empty.',
  itemNameRequired: 'Item name cannot be empty.',
  customFields: 'Custom fields',
  select: 'Select',
  current: 'Current',
  none: 'None',
  removeX: (x: string) => `Remove ${x}`,
  removeFieldX: (x: string) => `Remove field "${x}"`,
  // Generic filter/search helpers
  filterX: (x: string) => `Filter ${x}`,
  searchX: (x: string) => `Search ${x}...`,
  // Dashboard View messages
  newStory: '+ New story',
  noCharactersFound: 'No characters found. Click "Create new" to add your first character.',
  noLocationsFound: 'No locations found.',
  noEventsFound: 'No events found.',
  noItemsFound: 'No items found.',
  noImagesFound: 'No images found.',
  noGroupsFound: 'No groups found.',
  noReferencesFound: 'No references found.',
  noChaptersFound: 'No chapters found.',
  noScenesFound: 'No scenes found.',
  matchingFilter: ' Matching filter.',
  filterItems: 'Filter Items',
  filterGroups: 'Filter groups',
  noMembers: 'No members.',
  // Group/modal specific
  enterGroupName: 'Enter group name',
  describeGroupPh: 'Describe this group...',
  color: 'Color',
  colorPlaceholder: '#RRGGBB or color name',
  groupNameRequired: 'Group name is required.',
  groupNameExists: 'A group with this name already exists. Please choose a different name.',
  addImageDetails: 'Add image details',
  editImageDetails: 'Edit image details',
  commaSeparatedTags: 'Comma-separated tags.',
  commaSeparatedCharacterNames: 'Comma-separated character names.',
  commaSeparatedLocationNames: 'Comma-separated location names.',
  commaSeparatedEventNames: 'Comma-separated event names.',
  saveDetails: 'Save details',
  removeFromGallery: 'Remove from gallery',
  imageDetailsSaved: (path: string) => `Image details for "${path}" saved.`,
  imageRemovedFromGallery: (path: string) => `Image "${path}" removed from gallery.`,
  // Confirmation messages
  confirmDeleteScene: (name: string) => `Delete scene "${name}"?`,
  confirmDeleteReference: (name: string) => `Delete reference "${name}"?`,
  confirmDeleteChapter: (name: string) => `Delete chapter "${name}"?`,
  confirmDeleteGroup: (name: string) => `Are you sure you want to delete group "${name}"?`,
  confirmDeleteCharacter: (name: string) => `Are you sure you want to delete "${name}"?`,
  confirmDeleteEvent: (name: string) => `Are you sure you want to delete the event "${name}"? This will move the note to system trash.`,
  confirmDeleteLocation: (name: string) => `Are you sure you want to delete "${name}"?`,
  confirmDeleteItem: (name: string) => `Are you sure you want to delete "${name}"?`,
  confirmDeleteStory: (name: string) => `Delete story "${name}"? This cannot be undone.`,
  confirmRemoveImageFromGallery: (path: string) => `Are you sure you want to remove "${path}" from the gallery? This does not delete the file itself.`,
  confirmDeleteCharacterTrash: (name: string) => `Are you sure you want to delete "${name}"? This will move the file to system trash.`,
  confirmDeleteItemTrash: (name: string) => `Are you sure you want to delete "${name}"? This will move the file to system trash.`,
  // Success messages
  sceneCreated: (name: string) => `Scene "${name}" created.`,
  sceneUpdated: (name: string) => `Scene "${name}" updated.`,
  chapterCreated: (name: string) => `Chapter "${name}" created.`,
  chapterUpdated: (name: string) => `Chapter "${name}" updated.`,
  referenceCreated: (name: string) => `Reference "${name}" created.`,
  referenceUpdated: (name: string) => `Reference "${name}" updated.`,
  groupCreated: (name: string) => `Group "${name}" created.`,
  groupRenamed: (name: string) => `Group renamed to "${name}".`,
  groupDeleted: (name: string) => `Group "${name}" deleted.`,
  characterDeleted: (name: string) => `Character "${name}" deleted.`,
  locationDeleted: (name: string) => `Location "${name}" deleted.`,
  itemDeleted: (name: string) => `Item "${name}" deleted.`,
  fileMovedToTrash: (name: string) => `${name} file moved to trash.`,
  characterLinkedAlready: (name: string) => `Character "${name}" is already linked.`,
  // Error messages
  failedToDelete: (what: string) => `Failed to delete ${what}.`,
  failedToSave: (what: string) => `Failed to save ${what}.`,
  customFieldError: 'Custom field name must be unique, non-empty, and not reserved.',
  sceneNameRequired: 'Scene title is required.',
  chapterNameRequired: 'Chapter title is required.',
  locationNameRequired: 'Location name cannot be empty.',
  circularLocationError: 'Cannot set parent location: This would create a circular reference.',
  errorLoadingCharacters: 'Error loading characters. Check console.',
  errorLoadingLocations: 'Error loading locations. Check console.',
  errorLoadingEvents: 'Error loading events. Check console.',
  errorLoadingItems: 'Error loading items. Check console.',
  groupNotFound: 'Group not found.',
  noGroupsToRename: 'No groups to rename.',
  noGroupsToDelete: 'No groups to delete.',
  couldNotFindNote: 'Could not find the note file.',
  // Discovery messages
  autoDetectedStories: (count: number) => `Storyteller: Auto-detected and imported ${count} new story folder(s).`,
  errorDiscoveringStories: (error: string) => `Storyteller Suite: Error discovering stories: ${error}`,
  storiesRefreshed: (count: number) => `Storyteller: Found and imported ${count} new story folder(s).`,
  noNewStoriesFound: 'Storyteller: No new story folders found.',
  errorRefreshingStories: (error: string) => `Storyteller Suite: Error refreshing stories: ${error}`,
  errorScanningFolders: (error: string) => `Storyteller Suite: Error scanning custom folders: ${error}`,
  couldNotAutoDetect: 'Storyteller: Could not auto-detect a story root. Please set folders manually.',
  autoDetectedFolders: (parent: string, score: number) => `Storyteller: Auto-detected custom folders under "${parent}" (matches: ${score}).`,
  uploadedToVault: (fileName: string) => `Uploaded "${fileName}" to vault.`,
  errorUploadingFile: 'Error uploading file. Check console for details.',
  errorParsingFile: (fileName: string) => `Error parsing file: ${fileName}`,
  // UI text
  currentValue: (value: string) => `Current: ${value}`,
  ownerValue: (owner: string) => `Owner: ${owner}`,
  noImagesFoundFilter: 'No images found. Matching filter.',
  tutorialGettingStarted: 'Tutorial and getting started',
  type: 'Type',
  region: 'Region',
  storyNameField: 'Story Name',
  descriptionField: 'Description',
  // Placeholders
  beatSheetPh: '- Meet the mentor\n- The refusal',
  categoryPh: 'Language, Prophecy, Inspiration, Misc, ...',
  fieldNamePh: 'Field name',
  fieldValuePh: 'Field value',
  galleryUploadFolderPh: 'StorytellerSuite/GalleryUploads',
  customTodayPh: 'YYYY-MM-DD or full ISO (supports BCE dates)',
  timelineHeightPh: 'e.g., 380px',
  storyRootFolderPh: 'Creative/Writing/{storyName}',
  charactersFolderPh: 'MyStory/Characters',
  locationsFolderPh: 'MyStory/Locations',
  eventsFolderPh: 'MyStory/Events',
  itemsFolderPh: 'MyStory/Items',
  referencesFolderPh: 'MyStory/References',
  scenesFolderPh: 'MyStory/Scenes',
  chaptersFolderPh: 'MyStory/Chapters',
  oneStoryBaseFolderPh: 'StorytellerSuite',
  enterStoryNamePh: 'Enter story name',
  describeStoryPh: 'Describe your story (optional)',
  selectImageFilePh: 'Select an image file...',
  filterImagesPh: 'Filter by title, tag, link...',
  selectItemPh: 'Select an item to link...',
  selectEventLocationPh: 'Select the event\'s location...',
  selectParentLocationPh: 'Select a parent location...',
  selectGroupPh: 'Select a group…',
  filterFoldersPh: 'Type to filter folders…',
  selectGalleryImagePh: 'Select an image from the gallery...',
  selectEventPh: 'Select an event to link...',
  selectCharacterPh: 'Select a character to link...',
  priorityInChapter: 'Priority in chapter',
  priorityEg: 'e.g., 1',
  beatSheetOneLine: 'Beat sheet one line',
  writeScenePh: 'Write your scene...',
  // Setting descriptions
  scanVaultDesc: 'Scan your vault for existing Storyteller stories and import them. Useful after moving folders or changing structure.',
  galleryFolderDesc: 'Folder where uploaded gallery images will be stored',
  customFieldsDesc: 'Choose how custom fields are stored in frontmatter',
  forwardDateBiasDesc: 'Prefer future interpretation for relative dates (e.g., "Friday")',
  customTodayDesc: 'Optional date used for the Today button and relative parsing. Supports BCE dates (e.g., 2024-01-15 for CE, or -00499-01-01 for 500 BCE). Leave empty to use system today.',
  timelineHeightDesc: 'Adjust the height of the timeline modal',
  useCustomFoldersDesc: 'When enabled, use the folder paths below. You can include {storyName}, {storySlug}, or {storyId} to make per-story folders (e.g., Creative/Writing/{storyName}/Characters).',
  previewFoldersDesc: 'See each entity\'s resolved folder path based on current settings and active story',
  storyRootDesc: 'Base path template for all entities. Supports {storyName}, {storySlug}, {storyId}. Example: Creative/Writing/{storyName}',
  charactersFolderDesc: 'Path for character markdown files (placeholders allowed: {storyName}, {storySlug}, {storyId})',
  locationsFolderDesc: 'Path for location markdown files (placeholders allowed: {storyName}, {storySlug}, {storyId})',
  eventsFolderDesc: 'Path for event markdown files (placeholders allowed: {storyName}, {storySlug}, {storyId})',
  itemsFolderDesc: 'Path for item markdown files (placeholders allowed: {storyName}, {storySlug}, {storyId})',
  referencesFolderDesc: 'Path for reference markdown files (placeholders allowed: {storyName}, {storySlug}, {storyId})',
  scenesFolderDesc: 'Path for scene markdown files (placeholders allowed: {storyName}, {storySlug}, {storyId})',
  chaptersFolderDesc: 'Path for chapter markdown files (placeholders allowed: {storyName}, {storySlug}, {storyId})',
  oneStoryModeDesc: 'Flatten the folder structure to a single story. When enabled (and custom folders disabled), content goes under a single base folder without Stories/StoryName.',
  oneStoryBaseFolderDesc: 'Base folder for Characters/Locations/Events/Items/References/Chapters',
  showTutorialDesc: 'Display the tutorial and getting started section in settings',
  supportDevDesc: 'If you find this plugin helpful, consider supporting its development',
  pluginInfoDesc: 'Storyteller Suite - A comprehensive suite for managing characters, locations, events, and galleries for your stories.',
  storyNameDesc: 'Required. Must be unique.',
  descriptionOptionalDesc: 'Optional',
  locationNameDesc: 'The location\'s name.',
  locationTypeDesc: 'e.g., City, Forest, Castle, Tavern',
  locationRegionDesc: 'Broader geographic area.',
  locationStatusDesc: 'e.g., Active, Ruins, Abandoned',
  parentLocationDesc: 'Select a parent location that contains this location.',
  assignToGroupsDesc: 'Assign this location to one or more groups.',
  manageGroupsDesc: 'Manage your groups. Shared across all entity types.',
  searchGroupsDesc: 'Search by group name or description.',
  manageCharactersDesc: 'Manage your story characters.',
  manageLocationsDesc: 'Manage your story locations.',
  manageEventsDesc: 'Manage your story events.',
  manageImagesDesc: 'Manage your story images.',
  assignEventToGroupsDesc: 'Assign this event to one or more groups.',
  assignItemToGroupsDesc: 'Assign this item to one or more groups.',
  assignCharacterToGroupsDesc: 'Assign this character to one or more groups.',
};

const zh = {
  dashboardTitle: '故事讲述者套件',
  openDashboard: '打开仪表板',
  createNew: '创建新的',
  uploadImage: '上传图像',
  image: '图像',
  // Notices
  storyCreated: (name: string) => `故事"${name}"已创建并激活。`,
  created: (what: string, name: string) => `${what}"${name}"已创建。`,
  updated: (what: string, name: string) => `${what}"${name}"已更新。`,
  movedToTrash: (what: string, name: string) => `${what}"${name}"已移至回收站。`,
  imageUploaded: (fileName: string) => `图像已上传：${fileName}`,
  errorUploadingImage: '上传图像出错。请重试。',
  noteCreatedWithSections: '已创建带有标准章节的笔记，便于编辑。',
  // Errors
  workspaceLeafCreateError: '打开仪表板时出错：无法创建工作区叶。',
  workspaceLeafRevealError: '显示仪表板时出错：工作区叶未找到。',
  errorCannotDeleteWithoutFilePath: (what: string) => `错误：没有文件路径，无法删除${what}。`,
  errorCannotOpenNoteWithoutFilePath: (what: string) => `错误：没有文件路径，无法打开${what}笔记。`,
  // Remote images
  remoteImagesBlocked: '设置阻止了远程图像。请将图像导入图库以安全使用。',
  importImage: '导入图像',
  // Language settings
  language: '语言',
  selectLanguage: '选择语言',
  english: 'English (英语)',
  chinese: '中文 (Chinese)',
  languageChanged: '语言已更改。重新加载插件以完全生效。',
  // Common UI elements
  name: '名称',
  description: '描述',
  backstory: '背景故事',
  history: '历史',
  location: '位置',
  character: '角色',
  event: '事件',
  item: '物品',
  reference: '参考',
  chapter: '章节',
  scene: '场景',
  group: '组群',
  characters: '角色',
  locations: '位置',
  events: '事件',
  items: '物品',
  references: '参考',
  chapters: '章节',
  scenes: '场景',
  groups: '组群',
  gallery: '图库',
  timeline: '时间线',
  // Actions
  create: '创建',
  edit: '编辑',
  delete: '删除',
  save: '保存',
  cancel: '取消',
  view: '查看',
  upload: '上传',
  import: '导入',
  export: '导出',
  // Modal titles
  createNewCharacter: '创建新角色',
  editCharacter: '编辑角色',
  createNewLocation: '创建新位置',
  editLocation: '编辑位置',
  createNewEvent: '创建新事件',
  editEvent: '编辑事件',
  createNewItem: '创建新物品',
  editItem: '编辑物品',
  createNewReference: '创建新参考',
  editReference: '编辑参考',
  createNewChapter: '创建新章节',
  editChapter: '编辑章节',
  createNewScene: '创建新场景',
  editScene: '编辑场景',
  createNewGroup: '创建新组群',
  editGroup: '编辑组群',
  // Additional entity labels
  tags: '标签',
  summary: '摘要',
  content: '内容',
  number: '编号',
  orderingNumber: '排序编号（可选）',
  category: '类别',
  // Button labels
  createCharacter: '创建角色',
  createLocation: '创建位置',
  createEvent: '创建事件',
  createItem: '创建物品',
  createReference: '创建参考',
  createChapter: '创建章节',
  createScene: '创建场景',
  createGroup: '创建组群',
  saveChanges: '保存更改',
  deleteCharacter: '删除角色',
  deleteLocation: '删除位置',
  deleteEvent: '删除事件',
  deleteItem: '删除物品',
  deleteReference: '删除参考',
  deleteChapter: '删除章节',
  deleteScene: '删除场景',
  deleteGroup: '删除组群',
  add: '添加',
  clear: '清除',
  ok: '确定',
  confirm: '确认',
  selectBtn: '选择',
  previewBtn: '预览',
  editBtn: '编辑',
  openNoteBtn: '打开笔记',
  // Dropdown options
  flattenCustomFields: '展平为原生键（推荐）',
  nestedCustomFields: '嵌套在customFields下（YAML映射）',
  noGrouping: '无分组',
  byLocation: '按位置',
  byGroup: '按组群',
  noneOption: '无',
  fitOption: '适配',
  decadeOption: '十年',
  centuryOption: '世纪',
  // Warning messages
  customFoldersPlaceholderWarning: '自定义文件夹使用{story*}占位符。请选择或创建一个活动故事，然后点击"重新扫描自定义文件夹"。',
  openNote: '打开笔记',
  createGroupBtn: '创建组群',
  createChapterBtn: '创建章节',
  createSceneBtn: '创建场景',
  createReferenceBtn: '创建参考',
  viewCharacters: '查看角色',
  viewLocations: '查看位置',
  viewEvents: '查看事件',
  viewItems: '查看物品',
  viewReferences: '查看参考',
  viewChapters: '查看章节',
  viewScenes: '查看场景',
  viewGroups: '查看组群',
  viewTimeline: '查看时间线',
  viewGallery: '查看图库',
  // Additional messages
  selectOrCreateStoryFirst: '请先选择或创建一个故事。',
  selectGroupPlaceholder: '-- 选择组群 --',
  affiliation: '隶属',
  groupsHelpCharacter: '将此角色分配到一个或多个组群。',
  members: '成员',
  noCustomFields: '未定义自定义字段。',
  selectFromGallery: '从图库选择',
  clearImage: '清除图像',
  addImage: '添加图像',
  imageGallery: '图像库',
  filter: '筛选',
  search: '搜索',
  storyName: '故事名称',
  createNewStory: '创建新故事',
  plotItems: '情节物品',
  title: '标题',
  caption: '说明',
  fit: '适配',
  decade: '十年',
  century: '世纪',
  today: '今天',
  copyRange: '复制范围',
  stackItems: '堆叠项目',
  goToChapter: '前往章节',
  unassigned: '未分配',
  // Additional placeholders/helpers
  chapterTitlePh: '章节标题',
  sceneTitlePh: '场景标题',
  numberEg: '例如：1',
  tagsPh: '标签1，标签2',
  briefChapterSummaryPh: '本章节的简要摘要...',
  writeYourScenePh: '写下你的场景...',
  beatSheet: '节拍表（每行一个）',
  beatSheetExample: '- 遇见导师\\n- 拒绝',
  // Settings labels
  stories: '故事',
  active: '已激活',
  setActive: '设为激活',
  editStory: '编辑故事',
  storyDiscovery: '故事发现',
  refreshDiscovery: '刷新发现',
  galleryUploadFolder: '图库上传文件夹',
  timelineAndParsing: '时间线与解析',
  customFieldsSerialization: '自定义字段序列化',
  forwardDateBias: '自然语言解析偏向未来',
  customToday: '自定义今天（时间线参考）',
  defaultTimelineGrouping: '默认时间线分组',
  defaultZoomPreset: '默认缩放预设',
  defaultStacking: '默认堆叠',
  defaultDensity: '默认密度',
  showLegendByDefault: '默认显示图例',
  timelineDefaultHeight: '时间线默认高度',
  useCustomEntityFolders: '使用自定义实体文件夹',
  previewResolvedFolders: '预览解析后的文件夹',
  storyRootFolderOptional: '故事根文件夹（可选）',
  charactersFolder: '角色文件夹',
  locationsFolder: '位置文件夹',
  eventsFolder: '事件文件夹',
  itemsFolder: '物品文件夹',
  referencesFolder: '参考文件夹',
  scenesFolder: '场景文件夹',
  chaptersFolder: '章节文件夹',
  oneStoryMode: '单故事模式',
  oneStoryBaseFolder: '单故事基础文件夹',
  showTutorialSection: '显示教程部分',
  support: '支持',
  supportDevelopment: '支持开发',
  about: '关于',
  pluginInformation: '插件信息',
  buyMeACoffee: '请我喝咖啡',
  github: 'GitHub',
  preview: '预览',
  clearCustomToday: '清除自定义今天',
  // Placeholders
  enterCharacterName: '输入角色名称',
  characterDescriptionPh: '角色的简要描述...',
  traitsPlaceholder: '例如：勇敢、好奇、固执',
  characterHistoryPh: '角色的历史...',
  statusPlaceholderCharacter: '例如：存活、已故、失踪',
  enterItemName: '输入物品名称',
  itemDescriptionPh: '对该物品的外观进行描述...',
  itemHistoryPh: '该物品的起源、过去与意义...',
  enterLocationName: '输入位置名称',
  locationDescriptionPh: '位置的简要描述...',
  locationHistoryPh: '该位置的历史和过去事件...',
  statusPlaceholderLocation: '例如：活跃、废墟、废弃',
  enterEventName: '输入事件名称',
  eventDescriptionPh: '对该事件的描述...',
  eventOutcomePh: '该事件的结果或后果...',
  enterDateTime: '输入日期/时间',
  statusPlaceholderEvent: '例如：即将、已完成、进行中、关键情节点',
  // Event-specific
  dateTime: '日期/时间',
  outcome: '结果',
  status: '状态',
  charactersInvolved: '涉及的角色',
  associatedImages: '关联图像',
  links: '链接',
  relationships: '关系和位置',
  currentOwner: '当前拥有者',
  currentLocation: '当前位置',
  plotCritical: '情节关键',
  traits: '特征',
  profileImage: '个人资料图像',
  itemImage: '物品图像',
  selectOwner: '选择拥有者',
  selectLocation: '选择位置',
  changeLocation: '更改位置',
  clearLocation: '清除位置（设为无）',
  parentLocation: '父位置',
  selectParentLocation: '选择父位置',
  clearParentLocation: '清除父位置',
  addCharacter: '添加角色',
  addCustomField: '添加自定义字段',
  fieldName: '字段名称',
  fieldValue: '字段值',
  customFieldValueTitle: '自定义字段值',
  newCustomFieldTitle: '新建自定义字段',
  valueForX: (x: string) => `"${x}" 的值`,
  fieldNameCannotBeEmpty: '字段名称不能为空',
  thatNameIsReserved: '该名称已保留',
  fieldAlreadyExists: '已存在同名字段',
  characterNameRequired: '角色名称不能为空。',
  eventNameRequired: '事件名称不能为空。',
  itemNameRequired: '物品名称不能为空。',
  customFields: '自定义字段',
  select: '选择',
  current: '当前',
  none: '无',
  removeX: (x: string) => `移除 ${x}`,
  removeFieldX: (x: string) => `移除字段 "${x}"`,
  // Generic filter/search helpers
  filterX: (x: string) => `筛选${x}`,
  searchX: (x: string) => `搜索${x}...`,
  // Dashboard View messages
  newStory: '+ 新故事',
  noCharactersFound: '未找到角色。点击"创建新的"来添加您的第一个角色。',
  noLocationsFound: '未找到位置。',
  noEventsFound: '未找到事件。',
  noItemsFound: '未找到物品。',
  noImagesFound: '未找到图像。',
  noGroupsFound: '未找到组群。',
  noReferencesFound: '未找到参考。',
  noChaptersFound: '未找到章节。',
  noScenesFound: '未找到场景。',
  matchingFilter: ' 匹配筛选器。',
  filterItems: '筛选物品',
  filterGroups: '筛选组群',
  noMembers: '无成员。',
  // Group/modal specific
  enterGroupName: '输入组群名称',
  describeGroupPh: '描述此组群...',
  color: '颜色',
  colorPlaceholder: '#RRGGBB 或颜色名称',
  groupNameRequired: '组群名称是必填项。',
  groupNameExists: '已存在同名组群。请使用不同的名称。',
  addImageDetails: '添加图像详情',
  editImageDetails: '编辑图像详情',
  commaSeparatedTags: '以逗号分隔的标签。',
  commaSeparatedCharacterNames: '以逗号分隔的角色名称。',
  commaSeparatedLocationNames: '以逗号分隔的位置名称。',
  commaSeparatedEventNames: '以逗号分隔的事件名称。',
  saveDetails: '保存详情',
  removeFromGallery: '从图库移除',
  imageDetailsSaved: (path: string) => `已保存 "${path}" 的图像详情。`,
  imageRemovedFromGallery: (path: string) => `已从图库中移除 "${path}"。`,
  // Confirmation messages
  confirmDeleteScene: (name: string) => `删除场景 "${name}"？`,
  confirmDeleteReference: (name: string) => `删除参考 "${name}"？`,
  confirmDeleteChapter: (name: string) => `删除章节 "${name}"？`,
  confirmDeleteGroup: (name: string) => `确定要删除组群 "${name}"？`,
  confirmDeleteCharacter: (name: string) => `确定要删除 "${name}"？`,
  confirmDeleteEvent: (name: string) => `确定要删除事件 "${name}"？这将把笔记移至系统回收站。`,
  confirmDeleteLocation: (name: string) => `确定要删除 "${name}"？`,
  confirmDeleteItem: (name: string) => `确定要删除 "${name}"？`,
  confirmDeleteStory: (name: string) => `删除故事 "${name}"？此操作无法撤销。`,
  confirmRemoveImageFromGallery: (path: string) => `确定要从图库中移除 "${path}"？这不会删除文件本身。`,
  confirmDeleteCharacterTrash: (name: string) => `确定要删除 "${name}"？这将把文件移至系统回收站。`,
  confirmDeleteItemTrash: (name: string) => `确定要删除 "${name}"？这将把文件移至系统回收站。`,
  // Success messages
  sceneCreated: (name: string) => `场景 "${name}" 已创建。`,
  sceneUpdated: (name: string) => `场景 "${name}" 已更新。`,
  chapterCreated: (name: string) => `章节 "${name}" 已创建。`,
  chapterUpdated: (name: string) => `章节 "${name}" 已更新。`,
  referenceCreated: (name: string) => `参考 "${name}" 已创建。`,
  referenceUpdated: (name: string) => `参考 "${name}" 已更新。`,
  groupCreated: (name: string) => `组群 "${name}" 已创建。`,
  groupRenamed: (name: string) => `组群已重命名为 "${name}"。`,
  groupDeleted: (name: string) => `组群 "${name}" 已删除。`,
  characterDeleted: (name: string) => `角色 "${name}" 已删除。`,
  locationDeleted: (name: string) => `位置 "${name}" 已删除。`,
  itemDeleted: (name: string) => `物品 "${name}" 已删除。`,
  fileMovedToTrash: (name: string) => `${name} 文件已移至回收站。`,
  characterLinkedAlready: (name: string) => `角色 "${name}" 已经关联。`,
  // Error messages
  failedToDelete: (what: string) => `删除${what}失败。`,
  failedToSave: (what: string) => `保存${what}失败。`,
  customFieldError: '自定义字段名称必须唯一、非空且未保留。',
  sceneNameRequired: '场景标题是必填项。',
  chapterNameRequired: '章节标题是必填项。',
  locationNameRequired: '位置名称不能为空。',
  circularLocationError: '无法设置父位置：这将创建循环引用。',
  errorLoadingCharacters: '加载角色时出错。请检查控制台。',
  errorLoadingLocations: '加载位置时出错。请检查控制台。',
  errorLoadingEvents: '加载事件时出错。请检查控制台。',
  errorLoadingItems: '加载物品时出错。请检查控制台。',
  groupNotFound: '未找到组群。',
  noGroupsToRename: '没有组群可重命名。',
  noGroupsToDelete: '没有组群可删除。',
  couldNotFindNote: '找不到笔记文件。',
  // Discovery messages
  autoDetectedStories: (count: number) => `故事讲述者：自动检测并导入了 ${count} 个新故事文件夹。`,
  errorDiscoveringStories: (error: string) => `故事讲述者套件：发现故事时出错：${error}`,
  storiesRefreshed: (count: number) => `故事讲述者：发现并导入了 ${count} 个新故事文件夹。`,
  noNewStoriesFound: '故事讲述者：未发现新的故事文件夹。',
  errorRefreshingStories: (error: string) => `故事讲述者套件：刷新故事时出错：${error}`,
  errorScanningFolders: (error: string) => `故事讲述者套件：扫描自定义文件夹时出错：${error}`,
  couldNotAutoDetect: '故事讲述者：无法自动检测故事根目录。请手动设置文件夹。',
  autoDetectedFolders: (parent: string, score: number) => `故事讲述者：在 "${parent}" 下自动检测到自定义文件夹（匹配：${score}）。`,
  uploadedToVault: (fileName: string) => `已上传 "${fileName}" 到保险库。`,
  errorUploadingFile: '上传文件时出错。请检查控制台了解详情。',
  errorParsingFile: (fileName: string) => `解析文件时出错：${fileName}`,
  // UI text
  currentValue: (value: string) => `当前：${value}`,
  ownerValue: (owner: string) => `拥有者：${owner}`,
  noImagesFoundFilter: '未找到图像。匹配筛选器。',
  tutorialGettingStarted: '教程和入门指南',
  type: '类型',
  region: '区域',
  storyNameField: '故事名称',
  descriptionField: '描述',
  // Placeholders
  beatSheetPh: '- 遇见导师\n- 拒绝',
  categoryPh: '语言、预言、灵感、杂项...',
  fieldNamePh: '字段名称',
  fieldValuePh: '字段值',
  galleryUploadFolderPh: '故事讲述者套件/图库上传',
  customTodayPh: 'YYYY-MM-DD 或完整 ISO（支持公元前日期）',
  timelineHeightPh: '例如：380px',
  storyRootFolderPh: '创意/写作/{storyName}',
  charactersFolderPh: '我的故事/角色',
  locationsFolderPh: '我的故事/位置',
  eventsFolderPh: '我的故事/事件',
  itemsFolderPh: '我的故事/物品',
  referencesFolderPh: '我的故事/参考',
  scenesFolderPh: '我的故事/场景',
  chaptersFolderPh: '我的故事/章节',
  oneStoryBaseFolderPh: '故事讲述者套件',
  enterStoryNamePh: '输入故事名称',
  describeStoryPh: '描述你的故事（可选）',
  selectImageFilePh: '选择图像文件...',
  filterImagesPh: '按标题、标签、链接筛选...',
  selectItemPh: '选择要链接的物品...',
  selectEventLocationPh: '选择事件的位置...',
  selectParentLocationPh: '选择父位置...',
  selectGroupPh: '选择组群...',
  filterFoldersPh: '输入以筛选文件夹...',
  selectGalleryImagePh: '从图库选择图像...',
  selectEventPh: '选择要链接的事件...',
  selectCharacterPh: '选择要链接的角色...',
  priorityInChapter: '章节中的优先级',
  priorityEg: '例如，1',
  beatSheetOneLine: '节拍表单行',
  writeScenePh: '写下你的场景...',
  // Setting descriptions
  scanVaultDesc: '扫描你的保险库以查找现有的故事讲述者故事并导入它们。在移动文件夹或更改结构后很有用。',
  galleryFolderDesc: '存储上传的图库图像的文件夹',
  customFieldsDesc: '选择自定义字段在前置内容中的存储方式',
  forwardDateBiasDesc: '对相对日期偏向未来解释（例如"星期五"）',
  customTodayDesc: '用于"今天"按钮和相对解析的可选日期。支持公元前日期（例如，2024-01-15 表示公元，-00499-01-01 表示公元前 500 年）。留空使用系统今天。',
  timelineHeightDesc: '调整时间线模态框的高度',
  useCustomFoldersDesc: '启用时，使用下面的文件夹路径。你可以包含 {storyName}、{storySlug} 或 {storyId} 来创建每个故事的文件夹（例如，创意/写作/{storyName}/角色）。',
  previewFoldersDesc: '根据当前设置和活动故事查看每个实体的解析文件夹路径',
  storyRootDesc: '所有实体的基础路径模板。支持 {storyName}、{storySlug}、{storyId}。示例：创意/写作/{storyName}',
  charactersFolderDesc: '角色 Markdown 文件的路径（允许占位符：{storyName}、{storySlug}、{storyId}）',
  locationsFolderDesc: '位置 Markdown 文件的路径（允许占位符：{storyName}、{storySlug}、{storyId}）',
  eventsFolderDesc: '事件 Markdown 文件的路径（允许占位符：{storyName}、{storySlug}、{storyId}）',
  itemsFolderDesc: '物品 Markdown 文件的路径（允许占位符：{storyName}、{storySlug}、{storyId}）',
  referencesFolderDesc: '参考 Markdown 文件的路径（允许占位符：{storyName}、{storySlug}、{storyId}）',
  scenesFolderDesc: '场景 Markdown 文件的路径（允许占位符：{storyName}、{storySlug}、{storyId}）',
  chaptersFolderDesc: '章节 Markdown 文件的路径（允许占位符：{storyName}、{storySlug}、{storyId}）',
  oneStoryModeDesc: '将文件夹结构扁平化为单个故事。启用时（且禁用自定义文件夹），内容放在单个基础文件夹下，不包含故事/故事名称。',
  oneStoryBaseFolderDesc: '角色/位置/事件/物品/参考/章节的基础文件夹',
  showTutorialDesc: '在设置中显示教程和入门指南部分',
  supportDevDesc: '如果你觉得这个插件有用，请考虑支持其开发',
  pluginInfoDesc: '故事讲述者套件 - 管理故事角色、位置、事件和图库的综合套件。',
  storyNameDesc: '必填。必须唯一。',
  descriptionOptionalDesc: '可选',
  locationNameDesc: '位置的名称。',
  locationTypeDesc: '例如：城市、森林、城堡、酒馆',
  locationRegionDesc: '更广泛的地理区域。',
  locationStatusDesc: '例如：活跃、废墟、废弃',
  parentLocationDesc: '选择包含此位置的父位置。',
  assignToGroupsDesc: '将此位置分配到一个或多个组群。',
  manageGroupsDesc: '管理你的组群。在所有实体类型间共享。',
  searchGroupsDesc: '按组群名称或描述搜索。',
  manageCharactersDesc: '管理你的故事角色。',
  manageLocationsDesc: '管理你的故事位置。',
  manageEventsDesc: '管理你的故事事件。',
  manageImagesDesc: '管理你的故事图像。',
  assignEventToGroupsDesc: '将此事件分配到一个或多个组群。',
  assignItemToGroupsDesc: '将此物品分配到一个或多个组群。',
  assignCharacterToGroupsDesc: '将此角色分配到一个或多个组群。',
};

const locales: Record<Lang, typeof en> = { en, zh };
let current: Lang = 'en';

export function setLocale(lang: Lang) { current = lang; }
type ExtractFunction<T> = T extends (...args: infer P) => string ? (...args: P) => string : never;
export function t<K extends keyof typeof en>(key: K, ...args: Parameters<ExtractFunction<typeof en[K]>>): string {
  const value = locales[current][key] as any;
  if (typeof value === 'function') return value(...args);
  return value as string;
}
